ifdef::env-github[]
:tip-caption: :bulb:
:note-caption: :information_source:
:important-caption: :heavy_exclamation_mark:
:caution-caption: :fire:
:warning-caption: :warning:
endif::[]

= JEP-1: Jenkins Enhancement Proposal Format

:toc:

.Metadata
[cols="2"]
|===
| JEP
| 1

| Title
| Jenkins Enhancement Proposal Format

| Author
| link:https://github.com/rtyler[R Tyler Croy]

| Status
| :speech_balloon: Draft

| Type
| Process

| Created
| 2017-09-12
|===


== What is a JEP?

JEP stands for Jenkins Enhancement Proposal. A JEP is a design
document providing information to the Jenkins community, or describing
a new feature for Jenkins or its processes or environment. The JEP
should provide a concise technical specification of the feature and a
rationale for the feature.

We intend JEPs to be the primary mechanisms for proposing major new
features, for collecting community input on an issue, and for
documenting the design decisions that have gone into Jenkins. The JEP
author is responsible for building consensus within the community and
documenting dissenting opinions.

Because the JEPs are maintained as text files in a versioned
repository, their revision history is the historical record of the
feature proposal footnoteref:[repo, https://github.com/jenkinsci/jep].


== JEP Types

There are three kinds of JEP:

. A **Standards Track** JEP describes a new feature or implementation
 for Jenkins. It may also describe an interoperability or
 backwards-compatibility standard which will be supported for the feature in
 current versions of Jenkins, moving forward.
. An **Informational** JEP describes a Jenkins design issue, or
 provides general guidelines or information to the Jenkins community,
 but does not propose a new feature. Informational JEPs do not
 necessarily represent a Jenkins community consensus or
 recommendation, so users and implementers are free to ignore
 Informational JEPs or follow their advice.
. A **Process** JEP describes a process surrounding Jenkins, or
 proposes a change to (or an event in) a process. Process JEPs are like
 Standards Track JEPs but apply to areas other than the Jenkins codebase
 itself. They may propose an implementation, but not for what would be
 generally considered t he Jenkins codebase; they often require community
 consensus; unlike Informational JEPs, they are more than recommendations, and
 users are typically not free to ignore them. Examples include procedures,
 guidelines, changes to the decision-making process, and changes to the tools
 or environment used in Jenkins development. Any meta-JEP is also considered
 a Process JEP.


== JEP Workflow

=== Jenkins's BDFL

There are several references in this JEP to the "BDFL". This acronym stands for
"Benevolent Dictator for Life" and refers to Kohsuke Kawaguchi, original
creator of Jenkins.

=== JEP Editors

The JEP editors are individuals responsible for managing the administrative
and editorial aspects of the JEP workflow (e.g. assigning JEP numbers and
changing their status). See <<JEP Editor Responsibilities & Workflow>> for
details. The current editors are:

* R. Tyler Croy
* Oleg Nenashev
* Liam Newman
* Owen Mehegan
* Christopher Orr

JEP editorship is by invitation of the current editors All of the JEP workflow
can be conducted via the GitHub JEP Repository footnoteref:[repo], issues, and
pull requests.


=== Start with an idea for Jenkins

The JEP process begins with a new idea for Jenkins. It is highly recommended
that a single JEP contain a single key proposal or new idea. Small enhancements
or patches often don't need a JEP and can be injected into the Jenkins
development workflow with a pull request to the appropriate repository. The
more focused the JEP, the more successful it tends to be. The JEP editors
reserve the right to reject JEP proposals if they appear too unfocused or too
broad. If in doubt, split your JEP into several well-focused ones.

Each JEP must have a champion -- someone who writes the JEP using the style and
format described below, shepherds the discussions in the appropriate forums,
and attempts to build community consensus around the idea. The JEP champion
(a.k.a. Author) should first attempt to ascertain whether the idea is JEP-able.
Posting to the jenkinsci-dev@googlegroups.com mailing list is the best way to
go about this.

Vetting an idea publicly before going as far as writing a JEP is meant
to save the potential author time. Many ideas have been brought
forward for changing Jenkins that have been rejected for various
reasons. Asking the Jenkins community first if an idea is original
helps prevent too much time being spent on something that is
guaranteed to be rejected based on prior discussions (searching
the internet does not always do the trick). It also helps to make sure
the idea is applicable to the entire community and not just the author. Just
because an idea sounds good to the author does not mean it will work for most
people in most areas where Jenkins is used.

Once the champion has asked the Jenkins community as to whether an
idea has any chance of acceptance, a draft JEP should be presented to
jenkinsci-dev@. This gives the author a chance to flesh out the draft
JEP to make properly formatted, of high quality, and to address
initial concerns about the proposal.


=== Submitting a JEP

Following a discussion on jenkinsci-dev@, the proposal should be submitted as a
draft JEP via a GitHub pull request to this repository footnoteref:[repo]. The
draft must be written in JEP style as described below, else it will fail review
immediately (although minor errors may be corrected by the editors).

The standard JEP workflow is:

* You, the JEP author, fork the JEP repository footnoteref:[repo], and create a
  file named `jep/9999/README.adoc` that contains your new JEP. Use "9999" as
  your draft JEP number.
* Push this to your GitHub fork and submit a pull request.
* The JEP editors review your PR for structure, formatting, and other errors.
* Once approved, they will assign your JEP a number, and label it as Standards
 Track, Informational, or Process, and give it the status "Draft".

Once the review process is complete, and the JEP editors approve it (note that
this is *not* the same as accepting your JEP!), they will squash commit your
pull request into a branch with the numbered proposal.

The JEP editors will not unreasonably deny a JEP. Reasons for denying JEP
status include duplication of effort, being technically unsound, not providing
proper motivation or addressing backwards compatibility, or not in keeping
with the Jenkins philosophy. The BDFL can be consulted during the approval
phase, and is the final arbiter of the draft's JEP-ability.

Developers with git push privileges for the JEP repository footnoteref:[repo]
may claim JEP numbers directly by creating and committing a new JEP. When doing
so, the developer must handle the tasks that would normally be taken care of by
the JEP editors (see <<JEP Editor Responsibilities & Workflow>>). This includes
ensuring the initial version meets the expected standards for submitting a JEP.
Alternately, even developers may choose to submit JEPs via pull request.  When
doing so, let the JEP editors know you have git push privileges and they can
guide you through the process of updating the JEP repository directly.


As updates are necessary, the JEP author can check in new versions if they
(or a collaborating developer) have git push privileges.

After a JEP number has been assigned, a draft JEP may be discussed further on
jenkinsci-dev@ (getting a JEP number assigned early can be useful for ease of
reference, especially when multiple draft JEPs are being considered at the
same time).

Standards Track JEPs consist of two parts, a design document and a reference
implementation. It is generally recommended that at least a prototype
implementation be co-developed with the JEP, as ideas that sound good in
principle sometimes turn out to be impractical when subjected to the test of
implementation.

JEP authors are responsible for collecting community feedback on a JEP
before submitting it for review. However, wherever possible, long
open-ended discussions on public mailing lists should be avoided.
Strategies to keep the discussions efficient include:

* setting up a series of in-person, or video-conferencing sessions to
  discuss the JEP with necessary stakeholders.
* having the JEP author accept private comments in the early design phases
* setting up a wiki page, etc.

JEP authors should use their discretion here.


=== JEP Review & Resolution

Once the authors have completed a JEP, they may request a review for
style and consistency from the JEP editors. However, the content and
final acceptance of the JEP must be requested of the BDFL, usually via
an email to the jenkinsci-dev@ mailing list. JEPs are reviewed by the
BDFL and his chosen consultants, who may accept or reject a JEP or
send it back to the author(s) for revision. For a JEP that is
predetermined to be acceptable (e.g., it is an obvious win as-is
and/or its implementation has already been checked in) the BDFL may
also initiate a JEP review, first notifying the JEP author(s) and
giving them a chance to make revisions.

The final authority for JEP approval is the BDFL. However, whenever a new
JEP is put forward, any core developer that believes they are suitably
experienced to make the final decision on that JEP may offer to serve as
the BDFL's delegate (or "JEP czar") for that JEP. If their self-nomination
is accepted by the other core developers and the BDFL, then they will have
the authority to approve (or reject) that JEP. This process happens most
frequently with JEPs where the BDFL has granted in principle approval for
*something* to be done, but there are details that need to be worked out
before the JEP can be accepted.

If the final decision on a JEP is to be made by a delegate rather than
directly by the BDFL, this will be recorded by including the
"BDFL-Delegate" header in the JEP.

JEP review and resolution may also occur on a list other than jenkinsci-dev@ In
this case, the "Discussions-To" heading in the JEP will identify the
appropriate alternative list where discussion, review and pronouncement on the
JEP will occur.

For a JEP to be accepted it must meet certain minimum criteria:

* It must be a clear and complete description of the proposed enhancement.
* The enhancement must represent a net improvement.
* The proposed implementation, if applicable, must be solid and must not complicate Jenkins unduly.

Once a JEP has been accepted, the reference implementation must be
completed. When the reference implementation is complete and incorporated
into the main source code repository, the status will be changed to "Final".

A JEP can also be assigned status "Deferred". The JEP author or an
editor can assign the JEP this status when no progress is being made
on the JEP. Once a JEP is deferred, a JEP editor can re-assign it
to draft status.

A JEP can also be "Rejected". Perhaps after all is said and done it
was not a good idea. It is still important to have a record of this
fact. The "Withdrawn" status is similar - it means that the JEP author
themselves has decided that the JEP is actually a bad idea, or has
accepted that a competing proposal is a better alternative.

When a JEP is Accepted, Rejected or Withdrawn, the JEP should be updated
accordingly. In addition to updating the status field, at the very least
the Resolution header should be added with a link to the relevant post
in the python-dev mailing list archives.

JEPs can also be superseded by a different JEP, rendering the original
obsolete. This is intended for Informational JEPs, where version 2 of
an API can replace version 1.

The possible paths of the status of JEPs are as follows:

image::workflow.png[JEP Workflow]

Some Informational and Process JEPs may also have a status of "Active" if they
are never meant to be completed. E.g. JEP 1 (this JEP).


=== JEP Maintenance

In general, Standards track JEPs are no longer modified after they have
reached the Final state. Once a JEP has been completed, Jenkins developer
documentation must become the formal documentation of the expected behavior.

Informational and Process JEPs may be updated over time to reflect changes
to development practices and other details. The precise process followed in
these cases will depend on the nature and purpose of the JEP being updated.


== What belongs in a successful JEP?

Each JEP should have the following parts:

. **Metadata** - table containing metadata about the JEP, including the JEP
  number, a short descriptive title, the names, and optionally the contact info
  for each author, etc.
. **Abstract** - short (200 word) description of the technical issue
  being addressed.
. **Specification** - The technical specification should describe the
  syntax and semantics of any new feature. The specification should be
  sufficiently detailed to allow new, or existing, Jenkins developers to
  reasonably understand the scope/impact of an implementation.
. **Motivation** - The motivation is critical for JEPs that want to
  change Jenkins itself. It should clearly explain why the
  existing code base is inadequate to address the
  problem that the JEP solves. JEP submissions without sufficient
  motivation may be rejected outright.
. **Rationale** - The rationale fleshes out the specification by
  describing what motivated the design and why particular design
  decisions were made. It should describe alternate designs that
  were considered and related work, e.g. how the feature is supported
  in other languages.
+
The rationale should provide evidence of consensus within the
community and discuss important objections or concerns raised
during discussion.

. **Backwards Compatibility** - All JEPs that introduce backwards
  incompatibilities must include a section describing these
  incompatibilities and their severity. The JEP must explain how the
  author proposes to deal with these incompatibilities. JEP
  submissions without a sufficient backwards compatibility treatise
  may be rejected outright.
. **Reference Implementation** -- The reference implementation must be
  completed before any JEP is given status "Final", but it need not
  be completed before the JEP is accepted. While there is merit
  to the approach of reaching consensus on the specification and
  rationale before writing code, the principle of "rough consensus
  and running code" is still useful when it comes to resolving many
  discussions of API details.


The final implementation must include test code and documentation
appropriate for either the Jenkins user or developer documentation.


=== JEP Formats and Templates

JEPs are UTF-8 encoded text files using the
link:https://asciidoctor.org[AsciiDoc] format.  AsciiDoc allows for rich markup
that is still quite easy to read, but also results in good-looking and
functional HTML.


=== JEP Header Preamble

Each JEP must begin with an AsciiDoc table containing metadata relevant to the
JEP:

[source,asciidoc]
----
.Metadata
[cols="2"]
|===
| JEP
| 1

| Title
| Jenkins Enhancement Proposal Format

| Author
| link:https://github.com/rtyler[R Tyler Croy]

| Status
| :speech_balloon: Draft

| Type
| Process

| Created
| 2017-09-12
|===
----


. **JEP** -- Proposal number, given by the JEP editors. Use "9999" until one is assigned.
. **Title** -- Brief title explaining the proposal in fewer than 50 characters
. **Author** -- Author/champion of the JEP, in essence, the individual
  responsible for seeing the JEP through the process.
. **Status** -- Draft :speech_balloon:, Deferred :hourglass:, Accepted :ok_hand:, Rejected :no_entry:, Withdrawn :hand:, Final :lock:, Replaced :dagger:, Active :smile:.
. **Type** -- Describes the type of JEP: Standards, Informational, Process
. **Created** -- Date (`%Y%m%d`) when the document was first created.



A **BDFL-Delegate** row is used to record cases where the final decision to
approve or reject a JEP rests with someone other than the BDFL. (The
delegate's email address is currently omitted due to a limitation in the
email address masking for reStructuredText JEPs)

For a JEP where final pronouncement will be made on a list other than
jenkinsci-dev@, a **Discussions-To** row will indicate the mailing list
or URL where the pronouncement will occur. A temporary Discussions-To header
may also be used when a draft JEP is being discussed prior to submission for
pronouncement.

JEPs may have a **Requires** row, indicating the JEP numbers that this
JEP depends on.

JEPs may also have a **Superseded-By** row indicating that a JEP has been
rendered obsolete by a later document; the value is the number of the JEP that
replaces the current document. The newer JEP must have a **Replaces** row
containing the number of the JEP that it rendered obsolete.


=== Auxiliary Files

JEPs may include auxiliary files such as diagrams. Such files must be
named appropriately, with lowercase letters and no spaces, and be included in
the directory with the `README.adoc` describing the JEP.


=== Reporting JEP Bugs, or Submitting JEP Updates

How you report a bug, or submit a JEP update depends on several factors, such
as the maturity of the JEP, the preferences of the JEP author, and the nature
of your comments. For the early draft stages of the JEP, it's probably best to
send your comments and changes directly to the JEP author. For more mature, or
finished JEPs you may want to submit corrections to the JEP repository
footnoteref:[repo] or the Jenkins issue tracker
footnoteref:[issues,https://issues.jenkins-ci.org].  If the JEP author is a
Jenkins developer, assign the bug/patch to them, otherwise assign it to a JEP
editor.

When in doubt about where to send your changes, please check first
with the JEP author and/or a JEP editor.

JEP authors with git push privileges for the JEP repository can update the
JEPs themselves by using "git push" to submit their changes.


=== Transferring JEP Ownership

It occasionally becomes necessary to transfer ownership of JEPs to a
new champion. In general, it is preferable to retain the original author as
a co-author of the transferred JEP, but that's really up to the
original author. A good reason to transfer ownership is because the
original author no longer has the time or interest in updating it or
following through with the JEP process, or has fallen off the face of
the 'net (i.e. is unreachable or not responding to email). A bad
reason to transfer ownership is because the author doesn't agree with the
direction of the JEP. One aim of the JEP process is to try to build
consensus around a JEP, but if that's not possible, an author can always
submit a competing JEP.

If you are interested in assuming ownership of a JEP, you can also do this via
pull request. Fork the `JEP repository`_, make your ownership modification, and
submit a pull request. You should also send a message asking to take over,
addressed to both the original author and the JEP editors via jenkinsci-dev@.
If the original author doesn't respond to email in a timely manner, the JEP
editors will make a unilateral decision (it's not like such decisions can't be
reversed :).


=== JEP Editor Responsibilities & Workflow

A JEP editor must subscribe to the jenkinsci-dev@googlegroups.com list and must
watch the JEP repository footnoteref:[repo]. Most correspondence regarding JEP
administration can be handled through GitHub issues and pull requests.

For each new JEP that comes in an editor does the following:

* Read the JEP to check if it is ready: sound and complete. The ideas
 must make technical sense, even if they don't seem likely to be
 accepted.

* The title should accurately describe the content.

* Edit the JEP for language (spelling, grammar, sentence structure,
 etc.), markup, code style.

If the JEP isn't ready, an editor will send it back to the author for
revision, with specific instructions.

Once the JEP is ready for the repository, a JEP editor will:

. Assign a JEP number (almost always just the next available number, but
  sometimes it's a special/joke number, like 666 or 3141).
. Create a new branch for the JEP, i.e. `jep-1`.
. Retarget the original author's pull request to the new branch
. Squash the commit(s) into the branch.
. Update the JEP number in the document.

Updates to existing JEPs should be submitted as a GitHub pull request.

JEP editors don't pass judgment on JEPs. They merely do the
administrative & editorial part (which is generally a low volume task).

=== References
